(()=>{var e={};e.id=558,e.ids=[558],e.modules={6330:e=>{"use strict";e.exports=require("@prisma/client")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},7702:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>y,routeModule:()=>m,serverHooks:()=>l,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>p});var s={};r.r(s),r.d(s,{GET:()=>d});var a=r(2706),i=r(8203),u=r(5994),o=r(9187);let n=new(r(6330)).PrismaClient;async function d(){try{let e=(await n.booking.findMany()).map(e=>({id:e.id,code:e.code,customerName:e.customerName,team:e.team,fishSize:e.fishSize,dailyQuantities:"object"!=typeof e.dailyQuantities||Array.isArray(e.dailyQuantities)?null:e.dailyQuantities,weekNumber:e.weekNumber,createdAt:e.createdAt})).map(e=>{let t=e.dailyQuantities?Object.values(e.dailyQuantities).reduce((e,t)=>e+Number(t),0):0;return{code:e.code,customerName:e.customerName,team:e.team,fishSize:e.fishSize,totalQuantity:t,weekNumber:e.weekNumber,createdAt:e.createdAt}});return o.NextResponse.json(e,{status:200})}catch(e){return console.error("Error fetching summary:",e),o.NextResponse.json({error:"Failed to fetch summary"},{status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/summary/route",pathname:"/api/summary",filename:"route",bundlePath:"app/api/summary/route"},resolvedPagePath:"/Users/Fufu/booking/fish-booking-system/app/api/summary/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:c,workUnitAsyncStorage:p,serverHooks:l}=m;function y(){return(0,u.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:p})}},6487:()=>{},8335:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[989,452],()=>r(7702));module.exports=s})();