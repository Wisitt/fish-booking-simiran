{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///Users/Fufu/booking/fish-booking-system/app/api/bookings/route.ts"],"sourcesContent":["\nimport { NextResponse } from \"next/server\";\nimport { PrismaClient } from \"@prisma/client\";\n\nconst prisma = new PrismaClient();\n\nexport async function GET(req: Request) {\n  const userId = req.headers.get(\"userId\"); // Get userId from request headers\n\n  if (!userId) {\n    return NextResponse.json({ message: \"User ID is required\" }, { status: 400 });\n  }\n\n  try {\n    // Query bookings where userId matches\n    const bookings = await prisma.booking.findMany({\n      where: { userId: parseInt(userId) }, // Filter bookings by userId\n    });\n\n    return NextResponse.json(bookings);\n  } catch (error) {\n    console.error(\"Error fetching bookings:\", error);\n    return NextResponse.json({ message: \"Error fetching bookings\" }, { status: 500 });\n  }\n}\n\n  \nexport async function POST(req: Request) {\n  try {\n    const body = await req.json();\n\n    // Validate required fields\n    if (\n      !body.code ||\n      !body.team ||\n      !body.customerGroup ||\n      !body.customerName ||\n      !body.price ||\n      !body.dailyQuantities ||\n      !body.userId // Ensure userId is provided\n    ) {\n      return NextResponse.json(\n        { error: \"Missing or invalid required fields\" },\n        { status: 400 }\n      );\n    }\n\n    // Create the booking\n    const booking = await prisma.booking.create({\n      data: {\n        code: body.code,\n        team: body.team,\n        customerGroup: body.customerGroup,\n        customerName: body.customerName,\n        fishSize: body.fishSize,\n        fishType: body.fishType,\n        price: body.price,\n        dailyQuantities: body.dailyQuantities,\n        userId: body.userId, // Ensure userId is saved with the booking\n      },\n    });\n\n    return NextResponse.json(booking, { status: 201 });\n  } catch (error) {\n    console.error(\"Error creating booking:\", error);\n    return NextResponse.json({ error: \"Server error\" }, { status: 500 });\n  }\n}\n\n\n  \n  \n  \n  export async function DELETE(req: Request) {\n    try {\n      const url = new URL(req.url);\n      const id = url.searchParams.get(\"id\");\n  \n      if (!id) {\n        return NextResponse.json({ error: \"Missing ID\" }, { status: 400 });\n      }\n  \n      await prisma.booking.delete({ where: { id: parseInt(id, 10) } });\n      return NextResponse.json({ message: \"Booking deleted successfully\" });\n    } catch (error) {\n      console.error(\"Error deleting booking:\", error);\n      return NextResponse.json({ error: \"Server error\" }, { status: 500 });\n    }\n  }\n  \n  "],"names":[],"mappings":";;;;;AACA;AACA;;;AAEA,MAAM,SAAS,IAAI,2GAAA,CAAA,eAAY;AAExB,eAAe,IAAI,GAAY;IACpC,MAAM,SAAS,IAAI,OAAO,CAAC,GAAG,CAAC,WAAW,kCAAkC;IAE5E,IAAI,CAAC,QAAQ;QACX,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAsB,GAAG;YAAE,QAAQ;QAAI;IAC7E;IAEA,IAAI;QACF,sCAAsC;QACtC,MAAM,WAAW,MAAM,OAAO,OAAO,CAAC,QAAQ,CAAC;YAC7C,OAAO;gBAAE,QAAQ,SAAS;YAAQ;QACpC;QAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA0B,GAAG;YAAE,QAAQ;QAAI;IACjF;AACF;AAGO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,2BAA2B;QAC3B,IACE,CAAC,KAAK,IAAI,IACV,CAAC,KAAK,IAAI,IACV,CAAC,KAAK,aAAa,IACnB,CAAC,KAAK,YAAY,IAClB,CAAC,KAAK,KAAK,IACX,CAAC,KAAK,eAAe,IACrB,CAAC,KAAK,MAAM,CAAC,4BAA4B;UACzC;YACA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAqC,GAC9C;gBAAE,QAAQ;YAAI;QAElB;QAEA,qBAAqB;QACrB,MAAM,UAAU,MAAM,OAAO,OAAO,CAAC,MAAM,CAAC;YAC1C,MAAM;gBACJ,MAAM,KAAK,IAAI;gBACf,MAAM,KAAK,IAAI;gBACf,eAAe,KAAK,aAAa;gBACjC,cAAc,KAAK,YAAY;gBAC/B,UAAU,KAAK,QAAQ;gBACvB,UAAU,KAAK,QAAQ;gBACvB,OAAO,KAAK,KAAK;gBACjB,iBAAiB,KAAK,eAAe;gBACrC,QAAQ,KAAK,MAAM;YACrB;QACF;QAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC,SAAS;YAAE,QAAQ;QAAI;IAClD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;AACF;AAMS,eAAe,OAAO,GAAY;IACvC,IAAI;QACF,MAAM,MAAM,IAAI,IAAI,IAAI,GAAG;QAC3B,MAAM,KAAK,IAAI,YAAY,CAAC,GAAG,CAAC;QAEhC,IAAI,CAAC,IAAI;YACP,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAa,GAAG;gBAAE,QAAQ;YAAI;QAClE;QAEA,MAAM,OAAO,OAAO,CAAC,MAAM,CAAC;YAAE,OAAO;gBAAE,IAAI,SAAS,IAAI;YAAI;QAAE;QAC9D,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA+B;IACrE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;AACF"}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}