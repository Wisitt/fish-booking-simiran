services:
  - name: fish-booking-app
    type: web
    env: node
    buildCommand: |
      npm install --force
      npx prisma generate
      npm run build
    startCommand: |
      npx prisma migrate deploy
      npm start
    envVars:
      - key: DATABASE_URL
        value: postgresql://postgres:nRiylheTCmWRYkpQqkLOPpWsocuSJeUx@autorack.proxy.rlwy.net:21674/railway
      - key: NODE_ENV
        value: production
    plan: free
    region: us-west1

  - name: fish-booking-database
    type: postgres
    plan: free
